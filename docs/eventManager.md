# eventManager 정리

## 1. eventManager란?

eventManager는 가상 DOM 기반 UI 프레임워크에서 DOM 요소에 이벤트를 효율적으로 바인딩하고, 해제하며, 이벤트 위임을 통해 성능을 최적화하는 역할을 합니다.

---

## 2. 왜 필요한가?

- 많은 DOM 요소에 각각 이벤트를 직접 바인딩하면 성능 저하와 메모리 낭비가 발생할 수 있습니다.
- eventManager는 이벤트 위임 방식을 사용하여, 상위 컨테이너에 한 번만 이벤트를 등록하고 실제 이벤트 처리는 하위 요소에서 위임받아 처리합니다.
- 이를 통해 동적으로 추가/제거되는 요소에도 일관된 이벤트 처리가 가능합니다.

---

## 3. 주요 동작 원리 및 코드별 설명

### 1) addEvent(element, eventType, handler)

- 특정 DOM 요소에 이벤트 핸들러를 등록합니다.
- 내부적으로는 이벤트 정보를 저장해두고, 실제 이벤트 리스너는 상위 컨테이너에만 등록합니다.

### 2) removeEvent(element, eventType, handler)

- 특정 DOM 요소에서 이벤트 핸들러를 제거합니다.
- 저장된 이벤트 정보에서 해당 핸들러를 삭제합니다.

### 3) setupEventListeners(root)

- 루트 컨테이너에 실제 이벤트 리스너를 한 번만 **버블 단계**(기본)로 등록합니다.
- 이벤트 발생 시, 이벤트 타겟에서 부모 방향으로 올라가며 등록된 핸들러를 찾아 실행합니다(이벤트 위임).
- **핸들러 내에서 event.stopPropagation()이 호출되면, 더 이상 상위로 전파되지 않습니다.**

---

## 4. 결론

eventManager는 **버블 단계의 이벤트 위임**을 통해 성능을 최적화하고, 동적 UI에서도 일관된 이벤트 처리를 보장합니다. addEvent, removeEvent, setupEventListeners 세 함수로 구성되어, 선언적 UI와 효율적인 이벤트 관리를 동시에 실현합니다.
